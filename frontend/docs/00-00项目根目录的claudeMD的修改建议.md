结论：**⚠️接近“宪法级”，但还没完全达标。**
你这份 `CLAUDE.md` 已经具备“长期规则 + 语义红线 + AI 行为约束”的骨架，但里面存在几处**自相矛盾、越权、可执行性不足**的问题——这些会让它在真实协作/多 AI 工具链里“执行崩”。

下面我按“宪法级”标准，**直接挑最致命的问题**（为什么错 → 后果 → 怎么改）。

---

## 1) 顶部两条“🔥 强制要求”有越权与冲突

你写了：

* **所有交流必须中文（包括工具调用对话）**
* **项目内文件必须用 Claude 内置 Read，禁用 MCP filesystem 工具** 

### 为什么错

* **“所有交流必须中文”**对“人类协作规范”可以，但你把它扩展到“工具调用对话/代理命令”，会和一些工具/代理的既定格式冲突（例如某些命令/配置天然是英文 key 或固定语法）。宪法不应该强迫改写工具协议，否则会造成“合规但不可用”。
* **“禁用 mcp filesystem*工具”**属于“工具栈选择”，它不是语义/架构红线，**不够稳定**：你未来很可能会更换执行环境（Claude/Codex/Cursor/CI），这条会变成历史包袱。

### 后果

* AI 在执行时会出现两种坏结果：

  1. 为了遵守中文要求，**输出伪命令/错误命令**（形式正确、实际不可执行）。
  2. 为了禁用某工具，**读不到文件**，只能猜 → 你最讨厌的“幻觉式最佳实践”就会出现。

### 怎么改（强制建议）

把它们降级成**“默认策略 + 允许例外”**的宪法措辞，例如：

* “默认中文；**当工具/协议要求固定英文/语法时，以工具协议为准**，但解释必须中文。”
* “默认优先使用内置 Read；若当前执行器不支持或读取失败，允许使用等价安全读取方式，**必须在输出中声明采用了哪种读取方式**。”

---

## 2) “/programs/、/skills/、/paths/ 仅作为命名空间或索引页存在，但又给了 /levels/ 实体页”——规则边界还不够硬

你在 2.1 定义了 `/levels/` 为阶段定义页；在 4 里又强调实体必须是具体节点（`/programs/{slug}`、`/skills/{slug}`、`/paths/{slug}`），并说 `/programs/、/skills/、/paths/` 不构成实体页、不输出实体型 JSON-LD。 

### 为什么错

这里总体方向对，但缺一条关键硬规则：
**“索引页到底要不要输出 JSON-LD？输出什么类型？允许 BreadcrumbList / CollectionPage 吗？”**
现在你的文字是“**不输出实体型 JSON-LD**”，这句话太软，AI 很可能钻空子：

* “我不输出实体型 Course/DefinedTermSet，但我输出 ItemList/CollectionPage 行不行？”——会变成不一致。

### 后果

同一类索引页，在不同人/不同 AI 修改后，会出现**结构化数据形态漂移**：今天是空白，明天是 ItemList，后天变 CollectionPage。SEO/AEO 一旦漂移，回头排查非常痛苦。

### 怎么改

在宪法里加一个明确条款：

* `/programs/`、`/skills/`、`/paths/` 作为索引页：

  * ✅ 允许：`BreadcrumbList`、`WebPage`（或 `CollectionPage` *如果你认可*）
  * ❌ 禁止：把它当作 Program/Skill/Path 实体输出（比如 `@type: Course`/`DefinedTermSet`/你定义的“实体型”）
    并写清“是否允许 ItemList/CollectionPage”。宪法就该“一刀切”。

---

## 3) “Course Slug Format = {topic}-{tool}-{level}” 过度约束，会拖死内容扩展

你把课程 slug 固化成 `{topic}-{tool}-{level}`，并给例子 `photoshop-ai-design-beginner`。 

### 为什么错

这条不是“宪法级稳定规则”，而是**当前阶段的数据建模习惯**。课程很容易出现：

* 不以工具命名（比如“设计心理”“构图创作”）
* 多工具（ps+ai+figma）
* 没有明确 tool 的抽象课
* 未来 i18n / 多语言 slug 策略变化

### 后果

你未来每扩一类课程，就要“违宪”或“改宪法”。宪法一旦频繁改，就不叫宪法，叫 PRD。

### 怎么改（更硬也更灵活）

把格式从“固定三段”改成“**语义要求**”：

* slug 必须可读、稳定、与内容一致
* level 必须出现且只能是枚举值（如果你坚持）
* tool 作为可选段：有工具就写，没有就不写
* 明确禁止：堆砌营销词、临时状态、UI 状态

---

## 4) “Review Requirements”里混入了过程性要求：应迁移到 frontend/CLAUDE.md 或 docs

你写了：

* “Must record change reasons and impact”
* “All rule changes must be documented in CLAUDE.md”
* “必须列出新增/修改/删除文件清单，并说明可回滚方式”等。 

### 为什么错

这些是**执行流程**（怎么交付、怎么审查），不是“语义宪法”。它们当然重要，但宪法里只应保留**最小、最稳定、不可违背**的流程红线。
例如“列出文件清单”很好，但未来你可能通过 CI 自动生成清单，这条就会变成形式负担。

### 后果

宪法膨胀成“作业要求集合”，导致：

* 人/AI 为了合规写一堆格式话，真正关键的语义红线反而被淹没。
* 你后续想精简，会牵一发动全身。

### 怎么改

保留宪法级最小流程红线，例如：

* “任何会影响 URL/slug/实体语义/枚举 的改动必须显式声明”
  其余“输出文件清单、回滚方式、原因影响分析”的模板化要求，建议放到：
* `frontend/CLAUDE.md`（前端执行细则）或
* `docs/ai/ClaudeCode-Programming-Constitution.md`（你已经引用了这个）
  宪法只留一个“引用入口”，别重复。

---

## 5) “附录 Example JSON-LD”存在误导风险（建议更严格地隔离）

你把 JSON-LD 示例放在 Appendix，并声明“非规范性附录”。 

### 为什么错

AI 最容易**抄示例当规范**。你虽然写了“非强制”，但示例里包含很多字段（offers、educationalUse 等），未来可能与你实际策略不一致。

### 后果

以后 AI 会把示例当模板批量铺开，结果就会出现你之前担心的：**JSON-LD 写得很细，但内容不匹配**，然后你还得回头清洗。

### 怎么改

宪法里建议只保留“结构性断言”，不放可抄模板。更好的做法：

* 宪法里写：JSON-LD 必须真实一致、educationalLevel 必须 DefinedTerm 引用 `/levels/...`
* 示例移到 `frontend/docs/...` 或 `docs/schema-examples/...`，并在宪法里只给链接。

---

## 你这份文档“宪法级”的优点（确实强）

这几块做得对、而且是“长期稳定规则”：

* 页面职责边界（Course/Topic/Program/Path/Levels）清晰 
* 强制/禁止关系（hasPart/isPartOf、Topic 禁用 hasPart 等）很硬 
* StageKey 枚举唯一性 + fail-fast（assertStageKey）是典型宪法级红线 
* “不得夸大、JSON-LD 必须真实一致”的底线写得明确 
* 你对 Skill/Program/Path 主权的分工（尤其“Path 只负责建议顺序，结构主干不得用 hasPart”）非常关键 

---

## 我给你的“宪法级达标”最低修改清单（照做就能过）

1. 顶部两条强制要求改为“默认策略 + 允许例外（必须声明）”。
2. 补一条：索引页（/programs/ /skills/ /paths/）**允许/禁止输出哪些 JSON-LD 类型**，别留模糊空间。
3. slug 格式从“固定三段”升级为“语义约束 + 可选段”，避免未来频繁修宪。
4. 把流程性输出要求（文件清单/回滚/原因影响）下放到 `frontend/CLAUDE.md` 或你引用的 docs，只在宪法里保留“会影响语义的改动必须显式声明”。
5. Appendix 示例迁移出去或标注“严禁直接复制，需与页面内容逐项核对”。

---

## Summary

这份 `CLAUDE.md` **结构已经很接近宪法级**，但现在主要问题是：**工具与语言的强制条款越权、索引页 JSON-LD 边界不够硬、slug 规则过度具体、流程模板混进宪法、示例区容易被 AI 当规范抄**。按我给的 5 条最低改动做完，它就能真正“宪法级稳态运行”。

## In short（中文）

你这份文档**接近宪法级但还没过线**：上面的“全中文/禁用工具”越权、索引页 JSON-LD 规则不够硬、slug 过度死板、流程模板混入宪法、示例容易被 AI 直接抄。把这 5 点按我给的“最低修改清单”修掉，就能真正达标。
