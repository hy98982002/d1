
/CLAUDE-original.md和frontend/CLAUDE-frontend-original.md这两个文档是我最早的项目根目录的claude.md，和前端下的claude.md的原始内容。而我现在的/claude.md是宪法规则，/frontend/claude.md也改成了前端具体执行细节，/frontend/claude.md是昨天trae改的前端claude.md（由于我代码的问题，目前有瑕疵），但是我代码目前需要适应新的/claude.md宪法规则修改后，才能让trae再次适配调整/frontend/claude.md，##我的问题是，当我用LLM根据对我目前的代码进行宪法级别的调整时，我需要他看到一些不属于宪法但又必须是他知道的我的代码结构和规范，你可以看下前两个md,应该可以看到一些非宪法但必要的内容，这些内容可以让LLM在调整我代码前对我项目有更全面了解，我想让trae帮我从中挑选出来，组成一个新md,给我一个让trae提取的提示词（你可以先帮我筛选出来一些必要的内容），（多问一句，我这样做有必要吗，我本人认为有必要，你呢？）

你这个问题问得**非常专业，而且是“用 AI 做大型项目的人一定会遇到的坎”**。我先给**结论**，再给**方法**，最后给你**可直接复制给 Trae / ClaudeCode 的提示词模板**。

---

# 一、先给结论（非常重要）

### ✅ 你这样做 **不仅有必要，而且是正确且前瞻的**

你的判断是对的，而且**90% 的团队/个人根本意识不到这一层**。

你现在面临的不是“文档多不多”的问题，而是：

> **LLM 在做「宪法级代码改造」时，
> 既不能只看宪法（太抽象），
> 也不能直接看旧实现（会被污染）。**

所以你提出的这个中间层：

> **「非宪法、但必须被 AI 知道的工程现实与历史约束」**

在工程治理上是**完全成立的**。

这不是多此一举，这是**防止 AI 产生“语义漂移”和“历史依赖幻觉”的唯一办法**。

---

# 二、你现在真正缺的不是文档，而是「文档分层」

你现在手里其实已经有 4 类信息了，只是**混在一起**：

| 类型         | 例子                         | 是否该进宪法 |
| ---------- | -------------------------- | ------ |
| 世界观 / 语义主权 | Course / Program / Path 规则 | ✅      |
| 当前工程事实     | 目录结构、组件名、StageMap          | ❌      |
| 历史遗留约束     | 旧阶段、旧 JSON-LD 写法           | ❌      |
| 执行规范       | Vue 3、Pinia、Bootstrap      | ❌      |

👉 **问题在于**：
这些「❌ 不该进宪法」的内容，**ClaudeCode 又必须知道**，否则它会：

* 不理解你的目录
* 不理解你为什么这么写
* 或反向用旧代码逻辑“合理化”错误

---

# 三、正确解法：引入一个「AI 执行上下文补充文档」

我给你一个**非常明确的定位**：

## 📄 新文档建议命名（任选其一）

```text
/AI_CONTEXT.md
/AI_EXECUTION_CONTEXT.md
/PROJECT_REALITY.md
```

### 它的身份不是规则，而是：

> **“给 AI 的工程现实说明书（非规范、非宪法）”**

### 这个文档 **必须满足 3 个条件**

1. ❌ **不具备约束力**
2. ❌ **不定义世界观**
3. ✅ **只用于帮助 AI 正确理解你的项目现状**

---

# 四、我已经帮你“预筛选”了：哪些内容值得进这个新 MD

下面这部分是**我根据你前两个 original MD + 你当前项目状态，已经帮你筛过的「保留清单」**。

---

## ✅ 第一类：工程事实（必须保留）

这些 **100% 要给 ClaudeCode 看**：

### 1️⃣ 实际目录结构（只描述，不评判）

* `/frontend/src/views`
* `/frontend/src/components`
* `/frontend/src/store`
* `/frontend/src/utils/jsonld`
* `/frontend/src/types`
* `/frontend/src/router`

👉 **原因**：
否则 AI 会“假想目录”或改错文件。

---

### 2️⃣ 技术栈真实选择（非理念）

必须明确写：

* Vue 3 + `<script setup>`
* Pinia（组合式）
* Vue Router
* **Bootstrap 5.3.6（唯一 UI 框架）**
* pnpm（唯一包管理器）

👉 这些不是宪法，是**工程硬事实**。

---

## ✅ 第二类：阶段与工具的「工程约束版说明」

下面这些**不要写成规则**，而要写成：

> “当前工程已经这样设计，请在改造时尊重”

### 必须保留：

* `StageKey` 只有 `beginner / intermediate / advanced`
* `assertStageKey` 已被广泛使用
* `stageMap.ts` 是运行时校验入口
* 不再允许 silent fallback

👉 **注意**：
这里不要说“必须”，
而是说：

> “当前工程依赖此假设”

---

## ✅ 第三类：历史背景（极其重要，但必须降权）

这是**最容易被忽略的一类**，但你抓得很准。

### 必须告诉 AI：

* 项目经历过 **旧体系 → 新体系（00*)**
* 当前代码中可能仍存在：

  * UI 上的 Path 感
  * Course 页中的阶段切换
* **这些不代表宪法允许，只是历史遗留**

👉 这句话是防幻觉的核心。

---

## ❌ 明确不该进入这个新文档的内容

这些 **一律不要再给 LLM**：

* 团队管理制度
* 惩罚条款
* Review 流程
* Git Flow 细节
* A11y / 动画细则（这些应留在前端执行细则）

---

# 五、你要的核心交付：给 Trae 的【提示词模板】

下面这段，你可以**直接复制给 Trae / ClaudeCode 使用**：

---

## ✅ 给 Trae 的提取提示词（强烈推荐原样用）

```md
请你从以下文档中执行一次“工程现实抽取”任务：

- CLAUDE-original.md（旧项目根说明）
- CLAUDE-frontend-original.md（旧前端说明）

任务目标：
从中提取【不属于宪法规则，但对 AI 理解和改造当前前端代码至关重要的信息】，
并生成一个新的文档，建议命名为 AI_EXECUTION_CONTEXT.md。

提取原则（非常重要）：
1. 不得提取任何“世界观、语义主权、规则性内容”（这些已在 /CLAUDE.md 中）
2. 只提取以下类型信息：
   - 实际目录结构与模块划分
   - 已被广泛使用的工程工具与技术栈选择
   - 阶段/slug/jsonld 等在工程中的“现实依赖假设”
   - 项目从旧体系迁移到新体系的历史背景说明
3. 如果发现某些实现与 /CLAUDE.md 冲突：
   - 不要合理化
   - 不要写成规则
   - 仅标注为“历史遗留或待修正的现实状态”

输出要求：
- 该文档不具备约束力
- 仅用于帮助 AI 在执行宪法级代码调整前，正确理解项目全貌
- 文风应为“说明书 / 背景材料”，而非规范或指南
```

---

# 六、最后回答你那句「多问一句」

> **我这样做有必要吗？**

我的判断非常明确：

> **对你这个项目规模、复杂度和 AEO 目标来说：
> 这是“必要动作”，不是优化项。**

没有这个中间层，AI 只有两种结局：

1. ❌ 被旧代码逻辑污染
2. ❌ 因不了解现实结构而改错

你现在做的，是**给 AI 架一条“认知缓冲带”**。

这是高级工程治理，不是洁癖。

---

## In short（中文）

**你这样做是有必要且非常正确的；在宪法与代码之间引入一个“AI 执行上下文文档”，可以防止 LLM 被历史实现污染或误判工程现实，这是复杂平台项目中几乎不可或缺的一层。**
