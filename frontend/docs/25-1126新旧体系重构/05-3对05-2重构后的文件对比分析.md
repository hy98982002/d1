我需要查看重构前的文件结构，首先使用 git 命令查看 commit 883f83f 的文件状态。

toolName: run_command

status: success

command: git ls-tree -r --name-only 883f83f -- frontend/ undefined

我需要获取当前 frontend 目录的文件结构，以便与 commit 883f83f 的文件结构进行比较，找出重构前后新增或删除的文件。

toolName: run_command

status: success

command: git ls-files -- frontend/ undefined

我需要查看新增文件的具体内容，以便详细说明它们的作用。首先查看 JSON-LD 相关文件。

toolName: view_files

status: success

filePath: /Users/dongqingzhai/Desktop/UAI_project/frontend/src/utils/jsonld/index.ts

我需要查看更多新增文件的内容，以便详细说明它们的作用。

toolName: view_files

status: success

filePath: /Users/dongqingzhai/Desktop/UAI_project/frontend/src/utils/jsonld/buildProgramJsonLd.ts

我需要查看更多新增文件的内容，以便详细说明它们的作用。

toolName: view_files

status: success

filePath: /Users/dongqingzhai/Desktop/UAI_project/frontend/tests/e2e/stage_validation.spec.ts

我需要查看更多新增文件的内容，以便详细说明它们的作用。

toolName: view_files

status: success

filePath: /Users/dongqingzhai/Desktop/UAI_project/frontend/tools/scan-legacy-stages.cjs

现在我已经收集了足够的信息，可以总结重构前后 frontend 目录中新增和删除的文件，以及每个文件的主要作用。## 重构前后 frontend 目录文件变化

### 新增文件

| 文件路径                                            | 主要作用                                                                                                                                                                                                                             |
| --------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **frontend/src/utils/jsonld/index.ts**              | JSON-LD 工具导出文件，统一管理所有 JSON-LD 构建函数                                                                                                                                                                                  |
| **frontend/src/utils/jsonld/buildProgramJsonLd.ts** | 构建 Program（体系课）的 JSON-LD 结构化数据，用于 SEO/AEO 优化，定义了 EducationalOccupationalProgram 类型的结构化数据                                                                                                               |
| **frontend/src/utils/jsonld/buildCourseJsonLd.ts**  | 构建 Course（单课程）的 JSON-LD 结构化数据，用于 SEO/AEO 优化，定义了 Course 类型的结构化数据                                                                                                                                        |
| **frontend/tests/e2e/stage_validation.spec.ts**     | 纯新阶段验证 E2E 测试套件，包含 5 个测试用例：<br>1. 首页阶段标签显示验证<br>2. 课程详情页 JSON-LD 验证<br>3. Program 页面验证<br>4. 阶段切换功能验证<br>5. 页面源代码不包含遗留值验证<br>6. 课程数据完整性验证<br>7. SEO 元数据验证 |
| **frontend/tools/scan-legacy-stages.cjs**           | 扫描代码中的旧阶段枚举值工具，用于 CI/CD 流程中阻止包含遗留阶段名的代码进入主分支，支持递归扫描和多种排除规则                                                                                                                        |

### 删除文件

| 文件路径                                                | 说明                                         |
| ------------------------------------------------------- | -------------------------------------------- |
| **frontend/docs/1120 作废的建议/** 目录下所有文件       | 旧的课程重构 PRD 文档，已被新的重构 PRD 替代 |
| **frontend/docs/1120 前端课程重构资料/** 目录下所有文件 | 旧的课程重构资料，已被新的重构资料替代       |

### 重构主要内容

1. **JSON-LD 结构化数据优化**：新增了完整的 JSON-LD 构建工具，支持 Course 和 Program 两种类型，提升 SEO 表现
2. **E2E 测试覆盖**：新增了全面的 E2E 测试套件，确保纯新阶段体系（basic/intermediate/advanced）正确实现
3. **遗留代码检测**：新增了扫描工具，防止旧的阶段枚举值（如 free、beginner、project 等）进入主分支
4. **文档更新**：删除了旧的重构文档，使用新的 PRD 文档

### 核心作用

1. **提升 SEO 表现**：通过 JSON-LD 结构化数据，帮助搜索引擎更好地理解网站内容
2. **确保代码质量**：通过 E2E 测试和扫描工具，确保纯新阶段体系的正确实现和维护
3. **支持体系课发展**：新增的 Program JSON-LD 支持体系课的结构化数据展示
4. **规范开发流程**：通过扫描工具，确保团队遵循统一的阶段命名规范

### 技术要点

1. **Zod 模式验证**：使用 zod 库定义阶段枚举，确保类型安全
2. **Playwright E2E 测试**：使用 Playwright 进行端到端测试，覆盖多种场景
3. **Node.js 脚本**：使用 Node.js 编写扫描工具，支持 CI/CD 集成
4. **JSON-LD 结构化数据**：遵循 Schema.org 规范，构建符合搜索引擎要求的结构化数据

重构后，frontend 项目实现了纯新阶段体系（basic/intermediate/advanced），并通过测试和工具确保了代码质量和规范遵循。
