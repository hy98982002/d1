我需要查看program相关的视图组件和状态管理文件，以便分析修改program路由为动态slug需要涉及的文件。
        
            
toolName: view_files
            
status: success
          
            
filePath: /Users/dongqingzhai/Desktop/UAI_project/frontend/src/views/program/ProgramAView.vue
          
我需要查看ProgramBView.vue的内容，以便更好地理解当前的实现，然后分析修改成program/:slug需要涉及的文件。
        
            
toolName: view_files
            
status: success
          
            
filePath: /Users/dongqingzhai/Desktop/UAI_project/frontend/src/views/program/ProgramBView.vue
          
# Program 路由动态化评测报告

## 一、路由动态化时机评估

### 1. 核心结论
**建议在 vite-plugin-ssr 迁移前完成 Program 路由的动态化改造**

### 2. 评测依据

| 评估维度 | 迁移前改造 | 迁移后改造 | 结论 |
|---------|-----------|-----------|------|
| **代码复杂度** | 低 | 高 | 迁移前改造更简单，避免与 SSG 改造交叉 |
| **风险控制** | 低 | 中 | 迁移前改造影响范围小，易于测试和回滚 |
| **架构一致性** | 高 | 中 | 所有页面路由统一使用动态 slug 模式 |
| **开发效率** | 高 | 低 | 迁移前改造可复用现有组件结构，无需考虑 SSG 配置 |
| **路由设计** | 合理 | 复杂 | 动态路由是现代 Web 应用的标准实践 |

### 3. 具体原因

1. **避免架构冲突**：vite-plugin-ssr 迁移会引入新的路由机制，提前完成路由动态化可以确保路由设计的一致性
2. **简化迁移流程**：先统一路由格式，再进行 SSG 迁移，将复杂问题分解为简单步骤
3. **提高代码复用性**：动态路由可以将两个相似的 Program 视图组件合并为一个
4. **提升可扩展性**：支持未来新增 Program 类型，无需修改路由配置
5. **符合 RESTful 设计原则**：使用动态参数是 RESTful API 和路由设计的最佳实践

## 二、路由动态化实施方案

### 1. 涉及文件分析

| 文件路径 | 修改类型 | 说明 |
|---------|---------|------|
| `/frontend/src/router/index.ts` | 修改 | 将硬编码路由改为动态路由 |
| `/frontend/src/views/program/ProgramAView.vue` | 重构 | 与 ProgramBView.vue 合并为单一组件 |
| `/frontend/src/views/program/ProgramBView.vue` | 删除 | 合并到新的动态组件中 |
| `/frontend/src/views/program/[slug].vue` | 新增 | 动态 Program 视图组件 |
| `/frontend/src/store/courseStore.ts` | 新增 | 添加根据 Program slug 获取课程的方法 |
| `/frontend/src/types/index.ts` | 修改 | 新增 Program 相关类型定义 |

### 2. 技术实现方案

#### 2.1 路由配置修改

```ts
// 修改前
{
  path: '/program/aigc-intermediate',
  name: 'ProgramA',
  component: () => import('../views/program/ProgramAView.vue'),
  meta: {
    title: '会员进阶路线 - AIGC技能提升系统化学习路径',
    description: '专为已掌握基础技能、希望系统提升AIGC实战能力的学员设计'
  }
},
{
  path: '/program/ai-designer-advanced',
  name: 'ProgramB',
  component: () => import('../views/program/ProgramBView.vue'),
  meta: {
    title: '高阶技能路径 - 专业级AI设计师实战与项目落地',
    description: '面向希望达到专业级AI设计师水平、能够独立承接大型商业项目的学员'
  }
}

// 修改后
{
  path: '/program/:slug',
  name: 'Program',
  component: () => import('../views/program/[slug].vue'),
  props: true,
  beforeEnter: (to, from, next) => {
    const courseStore = useCourseStore()
    const slug = to.params.slug as string
    const program = courseStore.getProgramBySlug(slug)
    
    if (program) {
      next()
    } else {
      next('/404')
    }
  }
}
```

#### 2.2 Program 视图组件重构

```vue
<!-- 新增组件：src/views/program/[slug].vue -->
<template>
  <div class="program-view">
    <!-- 页面头部 -->
    <section class="program-hero" :style="heroStyle">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">首页</a></li>
                <li class="breadcrumb-item"><a href="/#courses">课程</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ program.name }}</li>
              </ol>
            </nav>
            <h1 class="program-title">{{ program.name }}</h1>
            <p class="program-subtitle">{{ program.subtitle }}</p>
            <div class="program-meta">
              <span class="meta-item">
                <i class="fas fa-layer-group me-1"></i>
                {{ programCourses.length }} 门精选课程
              </span>
              <span class="meta-item">
                <i class="fas fa-clock me-1"></i>
                {{ totalDuration }}+ 小时内容
              </span>
              <span class="meta-item">
                <i :class="levelIcon" class="me-1"></i>
                {{ program.levelLabel }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Program介绍 -->
    <section class="program-intro">
      <div class="container">
        <div class="row">
          <div class="col-lg-8">
            <h2 class="section-title">学习路径介绍</h2>
            <p class="intro-text">{{ program.description }}</p>
            <div class="learning-outcomes">
              <h3 class="outcomes-title">学习收获</h3>
              <ul class="outcomes-list">
                <li v-for="(outcome, index) in program.outcomes" :key="index">
                  <i class="fas fa-check-circle text-success me-2"></i>
                  {{ outcome }}
                </li>
              </ul>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="program-card">
              <h3 class="card-title">{{ program.benefitsTitle }}</h3>
              <ul class="benefits-list">
                <li v-for="(benefit, index) in program.benefits" :key="index">
                  <i :class="benefit.icon" class="me-2"></i>
                  {{ benefit.text }}
                </li>
              </ul>
              <button class="btn" :class="buttonClass">
                {{ program.buttonText }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 课程列表 -->
    <section class="program-courses">
      <div class="container">
        <div class="row mb-4">
          <div class="col-12">
            <h2 class="section-title">包含课程</h2>
            <p class="section-description">{{ program.courseDescription }}</p>
          </div>
        </div>
        <div class="row">
          <CourseCard
            v-for="(course, index) in programCourses"
            :key="course.id"
            :course="course"
            :index="index"
            @add-to-cart="handleAddToCart"
            @watch-now="handleWatchNow"
          />
        </div>
      </div>
    </section>

  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useRouter } from 'vue-router'
import CourseCard from '@/components/CourseCard.vue'
import { useCourseStore } from '@/store/courseStore'
import { useUIStore } from '@/store/uiStore'
import { buildProgramJsonLd } from '@/utils/jsonld'
import type { Course, Program } from '@/types'

// Props
const props = defineProps<{
  slug: string
}>()

// Stores
const courseStore = useCourseStore()
const uiStore = useUIStore()
const router = useRouter()

// 获取Program配置
const program = computed(() => {
  return courseStore.getProgramBySlug(props.slug)
})

// 获取对应阶段的课程
const programCourses = computed(() => {
  return courseStore.getCoursesByStage(program.value.stage)
})

// 计算总时长
const totalDuration = computed(() => {
  const total = programCourses.value.reduce((sum, course) => {
    const match = course.duration?.match(/(\d+)/)
    return sum + (match ? parseInt(match[1]) : 0)
  }, 0)
  return total
})

// 动态样式和配置
const heroStyle = computed(() => ({
  background: program.value.heroBackground
}))

const levelIcon = computed(() => {
  const iconMap = {
    basic: 'fas fa-signal',
    intermediate: 'fas fa-chart-line',
    advanced: 'fas fa-trophy'
  }
  return iconMap[program.value.stage as keyof typeof iconMap]
})

const buttonClass = computed(() => {
  return program.value.buttonClass
})

// 使用统一工具构建 Program JSON-LD 结构化数据
const programJsonLd = computed(() => {
  const jsonLd = buildProgramJsonLd({
    stage: program.value.stage,
    name: program.value.name,
    description: program.value.description,
    courses: programCourses.value,
    timeToComplete: `P${totalDuration.value}H`
  })
  return JSON.stringify(jsonLd, null, 2)
})

// 事件处理
const handleAddToCart = (course: Course) => {
  console.log('添加到购物车:', course.title)
  uiStore.showSuccess('添加成功', `${course.title} 已添加到购物车`)
}

const handleWatchNow = (course: Course) => {
  if (course.slug) {
    router.push({ name: 'CourseDetails', params: { slug: course.slug } })
  }
}
</script>
```

#### 2.3 Store 扩展

```ts
// src/store/courseStore.ts
// 新增 Program 相关方法和数据

// Program 数据配置
const PROGRAM_CONFIGS: Record<string, Program> = {
  'aigc-intermediate': {
    slug: 'aigc-intermediate',
    name: '会员进阶路线',
    subtitle: 'AIGC技能提升的系统化学习路径',
    description: '会员进阶路线专为已掌握基础技能、希望系统提升AIGC实战能力的学员设计。通过精心编排的课程体系，你将深入学习AI设计工具的高级应用，掌握从设计构思到作品落地的完整流程。',
    stage: 'intermediate',
    levelLabel: '进阶级别',
    heroBackground: 'linear-gradient(135deg, rgba(30, 127, 152, 0.05) 0%, rgba(42, 155, 184, 0.08) 100%)',
    outcomes: [
      '掌握Photoshop、Illustrator等工具的高级AI功能',
      '具备独立完成商业级设计项目的能力',
      '理解AIGC在不同设计场景的应用策略',
      '建立系统化的AI设计工作流程'
    ],
    benefitsTitle: '会员专享权益',
    benefits: [
      { icon: 'fas fa-crown text-warning', text: '访问所有进阶课程' },
      { icon: 'fas fa-download text-primary', text: '下载课程配套素材' },
      { icon: 'fas fa-users text-info', text: '加入专属学习社群' },
      { icon: 'fas fa-headset text-success', text: '享受优先技术支持' }
    ],
    buttonText: '立即加入会员',
    buttonClass: 'btn-tech-blue',
    courseDescription: '精心挑选的进阶课程，助你快速提升'
  },
  'ai-designer-advanced': {
    slug: 'ai-designer-advanced',
    name: '高阶技能路径',
    subtitle: '专业级AI设计师的实战与项目落地之路',
    description: '高阶技能路径面向希望达到专业级AI设计师水平、能够独立承接大型商业项目的学员。通过深度实战训练和真实项目演练，你将掌握从需求分析到作品交付的完整项目流程，具备进入设计行业工作或接单创业的能力。',
    stage: 'advanced',
    levelLabel: '高阶级别',
    heroBackground: 'linear-gradient(135deg, rgba(139, 69, 19, 0.05) 0%, rgba(184, 134, 11, 0.08) 100%)',
    outcomes: [
      '掌握多款专业AI设计工具的综合应用',
      '具备承接大型商业项目的能力和经验',
      '建立完整的项目管理和交付流程',
      '获得真实商业项目作品集'
    ],
    benefitsTitle: '高阶会员权益',
    benefits: [
      { icon: 'fas fa-crown text-warning', text: '访问所有高阶课程' },
      { icon: 'fas fa-project-diagram text-primary', text: '参与真实项目实战' },
      { icon: 'fas fa-briefcase text-info', text: '获得就业指导服务' },
      { icon: 'fas fa-certificate text-success', text: '颁发专业技能证书' }
    ],
    buttonText: '立即升级高阶会员',
    buttonClass: 'btn-premium-brown',
    courseDescription: '高阶实战课程，助你成为专业AI设计师'
  }
}

// 新增 getter 方法
export const useCourseStore = defineStore('course', () => {
  // ... 现有代码
  
  // 获取 Program 配置
  const getProgramBySlug = (slug: string) => {
    return PROGRAM_CONFIGS[slug]
  }
  
  // ... 现有代码
  
  return {
    // ... 现有返回值
    getProgramBySlug
  }
})
```

#### 2.4 类型定义扩展

```ts
// src/types/index.ts
// 新增 Program 相关类型

export interface ProgramBenefit {
  icon: string
  text: string
}

export interface Program {
  slug: string
  name: string
  subtitle: string
  description: string
  stage: StageKey
  levelLabel: string
  heroBackground: string
  outcomes: string[]
  benefitsTitle: string
  benefits: ProgramBenefit[]
  buttonText: string
  buttonClass: string
  courseDescription: string
}
```

## 三、技术文档说明

### 1. 路由动态化设计原则

1. **单一职责原则**：每个路由对应一个清晰的功能模块
2. **RESTful 设计**：使用动态参数表示资源，符合 RESTful API 设计原则
3. **可扩展性**：支持未来新增 Program 类型，无需修改路由配置
4. **代码复用**：合并相似组件，减少代码冗余
5. **类型安全**：使用 TypeScript 确保类型安全

### 2. 核心实现机制

1. **动态路由配置**：使用 `program/:slug` 路由模式，将 slug 作为参数传递给组件
2. **Program 配置管理**：集中管理所有 Program 的配置数据，便于维护和扩展
3. **组件动态渲染**：根据 slug 动态加载 Program 配置和对应阶段的课程
4. **样式动态化**：根据 Program 配置动态调整样式，保持视觉一致性
5. **JSON-LD 动态生成**：根据 Program 数据动态生成结构化数据，提升 SEO 表现

### 3. 优势和收益

1. **提高代码复用性**：将两个相似组件合并为一个，减少代码量约 50%
2. **提升可维护性**：集中管理 Program 配置，便于修改和扩展
3. **增强可扩展性**：支持未来新增 Program 类型，无需修改路由配置
4. **统一路由格式**：所有页面路由统一使用动态 slug 模式，提升架构一致性
5. **简化开发流程**：新增 Program 只需添加配置，无需修改组件代码
6. **提升 SEO 表现**：动态生成的结构化数据更有利于搜索引擎爬取

### 4. 测试和验证

1. **路由测试**：验证不同 slug 能正确匹配到对应的 Program 页面
2. **数据测试**：验证每个 Program 页面能正确显示对应阶段的课程
3. **样式测试**：验证不同 Program 页面的样式正确应用
4. **SEO 测试**：验证 JSON-LD 结构化数据正确生成
5. **性能测试**：验证动态路由的性能表现

## 四、结论和建议

1. **实施优先级**：高，建议在 vite-plugin-ssr 迁移前完成
2. **实施难度**：中等，主要涉及路由配置和组件重构
3. **预期收益**：提高代码复用性、可维护性和可扩展性
4. **风险控制**：影响范围小，易于测试和回滚
5. **后续建议**：
   - 考虑将 Program 配置迁移到后端 API，实现更灵活的管理
   - 增加 Program 页面的缓存机制，提升性能
   - 考虑支持 Program 页面的国际化

通过将 Program 路由修改为动态 slug 模式，可以显著提升代码的可维护性和可扩展性，为后续的 vite-plugin-ssr 迁移打下良好的基础。这是一个符合现代 Web 应用设计原则的改进，建议尽快实施。