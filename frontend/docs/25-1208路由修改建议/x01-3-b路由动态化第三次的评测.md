### 1 ⃣ 是否还要执行 **Phase 3: SEO 保护与优化**？

必须执行。虽然 Program 动态路由已经全部上线，JSON-LD 与面包屑也验证通过，但现阶段仍 **缺少站点级 SEO 护栏**：

* **sitemap 生成／更新**——目前只做了 JSON-LD，`sitemap.xml` 仍待补齐 
* **抓取与索引监控**——需在百度/Google/Bing Search Console 中重新提交站点映射，并观察新 URL 的收录情况 

> 建议把 Phase 3 作为 **D+2 ~ D+4 的收尾冲刺**：自动化输出 sitemap → 手动或 API 推送 → 一周内持续监控索引与报错。

---

### 2 ⃣ 可改进/优化的重点

| 维度           | 建议                                                                                                                                   | 依据                 |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------ | ------------------ |
| **页面级 meta** | 在 `<head>`（或 `useHead` / `@vueuse/head`）中按 Program 补全 `title`、`description`、`og:*`、`twitter:*`，并生成 `<link rel="canonical">`。         | 动态 meta 被列为可选优化项   |
| **站点地图**     | 结合 `PROGRAM_SLUGS` 与 `COURSE_SLUGS` 自动生成 `sitemap.xml`（GitHub Action 中 prerender 后写入 dist）。若未来迁移 SSG，可改产出多语言分块站点地图。                  | Phase 3 待办         |
| **数据单一来源**   | 已把 Program 配置放进 `courseStore.programs`，但仍建议把 **阶段枚举、slug 列表、国际化描述** 提炼为一个 `programs.ts` 模块并在 store 中 `import`，保持 mock 与真实 API 的一致结构。 | “数据管理需统一” ⚠️ 警示    |
| **健康监控**     | 在 CI 增加 Lighthouse CLI / Robots-Tester；对于 sitemap，跑 dead-link & broken-href 检测后再部署。                                                  | CI 已全绿，可继续扩展自动化覆盖  |
| **内部链接**     | 未来可增加 `/programs` 列表页，把所有 Program 以及对应阶段课程做聚合，强化“主题 → 路径 → 课程”内部连结。                                                                  | 列入可选优化             |

---

### 3 ⃣ 向 **vite-plugin-ssr (SPA→SPA + SSG)** 迁移的准备度

当前代码已经满足 **“动态 slug → 静态路径”** 的最核心前置条件，但距离可落地的混合渲染仍有几个 Checklist：

1. **文件命名与目录**

   * `[slug].vue` → `[slug]/+Page.vue`（或 `*.page.vue`）
   * 新增 `[slug]/+Page.server.ts`，在 `onBeforeRender()` 中注入 `program`, `programCourses` 等数据。
2. **静态路径声明**

   * 在同一 `+Page.server.ts` 暴露 `export const prerender = true`，并返回 `staticPaths = PROGRAM_SLUGS.map(s => ({ params:{ slug:s } }))`。
3. **守卫逻辑前移**

   * 现有 `beforeEnter` 校验需迁移到 `onBeforeRender()`，生成 404 pageContext，避免双端重复逻辑。
4. **Pinia SSR 复水**

   * `createPinia().use(ssrPlugin)` 并将初始 state 注入 HTML。
5. **CI / 构建链**

   * 加入 `npm run prerender && vite build` 流程，确保静态 HTML 成功写到 `dist/client`.
6. **阶段规划**

   * 以上内容已被评测报告列为 *Phase 4*（D+30）任务 ，目前路由与数据层结构已符合迁移前置要求。

> **Ready Score：≈ 70 %** — 基础路由与数据层 OK；等命名、守卫迁移、prerender 脚本和 SSR 复水完成后即可试跑 vite-plugin-ssr。

---

## “In short” （简要总结）

1. **Phase 3 还必须做**：补 sitemap、推送索引、持续监控。
2. **可改进**：动态 meta、统一数据源、自动化 SEO 监控、Program 列表页。
3. **SSG 准备度**：路由/data 已就绪，仍需改文件命名、onBeforeRender、prerender 及 Pinia SSR 复水。
--------------------------------
##‘抓取与索引监控——需在百度/Google/Bing Search Console 中重新提交站点映射，并观察新 URL 的收录情况’你说的这个，我网站还没运行上线，目前可以进行？

## 是否能提前做 Search Console 提交？

**结论：正式提交 sitemap 并观察收录，要等站点能够从公网直接访问**。
不过，在网站尚未上线前，你仍可以做以下“预配”工作，为后续上线后的秒级推送和收录监控打好基础。

---

### 1  现在就能做的准备工作

| 步骤                          | 说明                                                                                                                 | 目的                   |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------ | -------------------- |
| **域名级验证**                   | 在百度/Google/Bing Search Console 创建 *Domain Property*，采用 **DNS TXT 记录** 方式验证。<br>✅ 只需域名拥有权即可，不要求站点已上线                | 后续换服务器、换子域都无需重新验证    |
| **robots.txt & sitemap 模板** | 先在代码仓库里准备 `robots.txt` 和 `sitemap.xml` 生成脚本（CI 中输出到 /dist）。<br>robots.txt 默认放行全部：<br>`User-Agent: *`<br>`Allow: /` | 上线时直接带着文件部署；避免临时编写出错 |
| **推送脚本/接口 Key**             | 提前申请百度 LinkSubmit、Bing URL Submission API、Google Indexing API（视频/Job 类别）所需的 token。                                 | 上线后可在 CI/CD 中实现自动推送  |
| **监控面板搭建**                  | 把三大搜索平台的站点属性加到同一个监控仪表盘（Data Studio / Looker Studio、Bing Webmaster API 等）。                                          | 发布后可立刻看到抓取和索引曲线      |

---

### 2  不要过早曝光开发环境

* **不要把本地或临时预览 URL 提交**

  * 若需外网预览可使用临时子域（如 `preview.doviai.com`）并在 `<meta name="robots" content="noindex">` 或 robots.txt 中 `Disallow: /`，防止开发版被搜索引擎收录。
* **避免 CDN 缓存泄漏**

  * 若 CDN 节点提前缓存了静态页面，也可能被搜索引擎发现。上线前可在 CDN 控制台对测试域名设置“禁止搜索引擎抓取”。

---

### 3  上线当日／之后的推荐流程

1. **切正式 DNS 记录 → CDN/服务器可访问**
2. **CI 自动推送最新 sitemap 到三大平台**
3. **在 Search Console 点 “抓取”/“检索并呈现” 测试首页**（优先保证 200 状态）
4. **24 h 内监控**：

   * 抓取统计曲线是否有新 URL；
   * robots 报错、结构化数据报错是否为 0；
5. **一周内巡检**

   * 查看实际收录量与 sitemap 中的总量差距；
   * 针对未收录 URL 做手动检索并“请求索引”，或排查指向深层页面的内部链接是否充足。

---

## In short（中文简要总结）

* **真正提交 sitemap 需等网站公网可访问**；现在可以先完成 **域名验证、robots.txt / sitemap 模板、推送脚本、监控面板** 四项准备。
* 开发/预览环境务必加 `noindex` 或 robots Disallow，防止误收录。
* 上线当天推送 sitemap → 手动抓取检测 → 持续监控抓取/收录曲线，7 天内完成首次健康巡检。
