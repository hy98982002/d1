# Project Constitution (CLAUDE.md)

This document defines the non-negotiable rules of the project.
All AI agents, contributors, and future refactors MUST comply.

## 1ï¸âƒ£ é¡¹ç›®ç›®æ ‡ä¸é•¿æœŸå®šä½

## Project Vision & Long-Term Direction

- **å¹³å°å®šä½**: åŸºäº Vue 3 + Django æ„å»ºçš„åœ¨çº¿æ•™è‚²æœåŠ¡å…¨æ ˆ Web åº”ç”¨ï¼Œä¸“æ³¨äº AI è¯¾ç¨‹çš„ AEO / LRMI è¯­ä¹‰ä¼˜åŒ–
- **æ ¸å¿ƒæŠ€æœ¯**: Vue 3, Django, Pinia, Vue Router 4, TypeScript
- **AEO / SEO ä¼˜å…ˆçº§**: éµå¾ª Schema.org + LRMI + AEO æœ€ä½³å®è·µï¼Œæ„å»ºé«˜è´¨é‡çš„æ•™è‚²å†…å®¹çŸ¥è¯†å›¾è°±
- **ç”¨æˆ·ä½“éªŒ**: æä¾›æ¸…æ™°çš„å­¦ä¹ è·¯å¾„ï¼Œä¼˜åŒ–è¯­ä¹‰ç»“æ„ï¼Œæå‡æœç´¢å¼•æ“ç†è§£å’Œç”¨æˆ·å¯¼èˆªä½“éªŒ

---

## 2ï¸âƒ£ å†…å®¹ä¸è¯­ä¹‰å®ªæ³•

## Content Semantic Responsibility & AEO Page Roles

> This section defines constitutional-level semantic boundaries.
> Violations are considered architecture-level errors.

### Page Role Definitions (Must Follow)

To ensure correct AEO / LRMI semantic alignment, each page type MUST follow a single, non-overlapping responsibility.

#### 1. Course Pages
**Purpose**: Explain *what this specific course teaches*.

- Focus on: course content, skills taught, outcomes, syllabus, lessons
- MUST NOT explain global learning stages or learning order
- JSON-LD focus: Course, CourseInstance, educationalLevel (reference only)

> A Course page answers:
> "What will I learn in THIS course?"

---

#### 2. Level Pages (`/levels/`)
**Purpose**: Define *what a learning level means*.

- Focus on: Beginner / Intermediate / Advanced definitions
- Explain learner prerequisites, expected skills, learning difficulty
- Aggregate courses that belong to this level
- JSON-LD focus: DefinedTerm (educationalLevel entity)

> A Level page answers:
> "What does Beginner / Intermediate / Advanced mean?"

---

#### 3. Program / Path Pages
**Purpose**: Describe *learning sequence and progression*.

- Focus on: learning order, prerequisites, progression logic
- Connect multiple courses and/or levels into a structured path
- MUST NOT redefine level meanings
- JSON-LD focus: EducationalOccupationalProgram, hasPart, programPrerequisites

> A Program / Path page answers:
> "What should I learn first, then next, and why?"

---

### Forbidden Semantic Overlaps

- âŒ **Course pages**: Must NOT explain global learning stages or define what "Beginner" means
- âŒ **Level pages**: Must NOT teach specific course content or define learning order
- âŒ **Program pages**: Must NOT repeat course content or redefine level meanings
- âš ï¸ **Rule**: A page MUST NOT take over responsibilities from another page type. Semantic responsibility overlap is considered a structural error.

---

## 3ï¸âƒ£ URL / Slug å®ªæ³•

## URL & Slug Canonical Rules

### Slug çš„è¯­ä¹‰åŸåˆ™

- **slug â‰  å±•ç¤ºç”¨**: Slugs are not for display purposes but for semantic anchoring
- **slug = é•¿æœŸç¨³å®šè¯­ä¹‰é”šç‚¹**: Slugs should remain stable over time to maintain SEO value
- **SEO / AEO ä¼˜å…ˆ**: Slugs must follow AEO / LRMI best practices for optimal semantic understanding

---

### Course Slug Rules

- **Format**: `{topic}-{tool}-{level}`
- **Level part**: Must use system-defined level terms (`beginner` / `intermediate` / `advanced`)
- **Example**: `photoshop-ai-design-beginner`
- **ç¦æ­¢**: Using descriptive terms like `basic` or `pro` instead of system-level terms
- **Migration rule**: Existing slugs may be preserved for backward compatibility unless a dedicated migration plan exists

---

### Level & Program Slug Rules

- **Level pages**: `/levels/beginner`, `/levels/intermediate`, `/levels/advanced`
- **Program pages**: `/programs/ai-design-path`, `/programs/machine-learning-bootcamp`
- **Semantic clarity**: Slugs must clearly indicate the page type and purpose

---

## 4ï¸âƒ£ AEO / Schema / LRMI å®ªæ³•

## AEO, Schema.org & LRMI Principles

### Schema çš„â€œçœŸå®è¡¨è¾¾åŸåˆ™â€

- âŒ **No false claims**: JSON-LD must accurately reflect the actual course content
- âœ… **Verifiable content**: All Schema.org claims must be verifiable from the page content
- âœ… **Semantic consistency**: JSON-LD terms must match page semantics and URL structure

---

### educationalLevel ä½¿ç”¨è§„åˆ™

- **Must use DefinedTerm**: Avoid plain strings, use structured DefinedTerm format
- **Must reference level entity**: Link to `/levels/` pages using `@id` or `inDefinedTermSet`
- **Example**: 
  ```json
  "educationalLevel": {
    "@type": "DefinedTerm",
    "name": "Beginner",
    "@id": "https://www.doviai.com/levels/beginner"
  }
  ```

---

### Program / Course / Skill çš„å…³ç³»è§„åˆ™

- **isPartOf / hasPart**: Use these properties to define hierarchical relationships
- **programPrerequisites**: Clearly define prerequisites for Program pages
- **educationalUse**: Use LRMI educationalUse values to categorize content types
- **ç¦æ­¢**: Using unrelated or misleading properties to inflate SEO value

---

## 5ï¸âƒ£ æ•°æ®æ¨¡å‹ä¸é¡µé¢å…³ç³»å®ªæ³•

## Data Model & Page Relationship Rules

### Course / Level / Program çš„æ•°æ®èŒè´£

- **Course**: Contains specific course content, lessons, outcomes, and metadata
- **Level**: Defines learning stage characteristics, prerequisites, and aggregates courses
- **Program**: Defines learning pathways, connects multiple courses, and explains progression logic

### Single Source of Truth Rule

- **Level definitions**: Must only be defined in `/levels/` pages, referenced elsewhere
- **Course data**: Must be centralized in the course store, with consistent identifiers
- **Program structure**: Must be defined in the program store, referencing existing courses and levels

---

## 6ï¸âƒ£ å‰åç«¯è¾¹ç•Œå®ªæ³•

## Frontend / Backend Responsibility Boundary

### Backendè´Ÿè´£ä»€ä¹ˆ

- **Data source**: Provides the single source of truth for all content data
- **Semantic consistency**: Ensures data follows semantic rules and AEO best practices
- **API design**: Exposes RESTful endpoints that align with page roles and semantic responsibilities
- **Authentication**: JWT-based authentication for secure access

### Frontendè´Ÿè´£ä»€ä¹ˆ

- **Content display**: Renders content according to semantic rules
- **User experience**: Implements navigation, interactive elements, and responsive design
- **JSON-LD generation**: Generates and injects structured data based on backend data
- **Route management**: Implements client-side routing with proper guards and semantic validation
- **State management**: Manages client-side state using Pinia, following single source of truth principles

---

## 7ï¸âƒ£ AI / Agent è¡Œä¸ºçº¦æŸ

## AI & Agent Behavioral Constraints

### Claude / Codex çš„ç”Ÿæˆçº¢çº¿

- âŒ **Do not invent new concepts**: Only use defined terms and concepts
- âŒ **Do not modify slug rules**: Follow established slug conventions
- âŒ **Do not create new level names**: Only use `beginner`, `intermediate`, `advanced`
- âœ… **Follow semantic boundaries**: Respect page role definitions and forbidden overlaps
- âœ… **Use existing patterns**: Follow established code patterns and architectures

### How to Change the Constitution

- **Must update CLAUDE.md**: All rule changes must be documented in this file
- **Must record change reasons**: Explain why the change is necessary and its impact
- **Must maintain backward compatibility**: Whenever possible, avoid breaking changes
- **Review process**: Major changes should be reviewed and approved before implementation

---

## 8ï¸âƒ£ CHANGELOG ä¸å®ªæ³•åŒæ­¥è§„åˆ™

## Constitution & CHANGELOG Synchronization

- **CHANGELOG.md**: Records "what happened" - implementation details, features, bug fixes
- **CLAUDE.md**: Records "what rules changed" - semantic principles, page roles, AEO guidelines
- **Sync requirement**: Any changes to semantic rules or page roles must be reflected in both documents

---

## 9ï¸âƒ£ é™„å½•

## Appendix

### Example JSON-LD Structures

#### Course Page JSON-LD Example
```json
{
  "@context": "https://schema.org",
  "@type": "Course",
  "name": "AI Photoshop Design Beginner",
  "description": "Learn the basics of AI-powered Photoshop design.",
  "educationalLevel": {
    "@type": "DefinedTerm",
    "name": "Beginner",
    "@id": "https://www.doviai.com/levels/beginner"
  },
  "educationalUse": ["Lecture", "Demonstration", "Exercise"],
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "CNY",
    "availability": "https://schema.org/InStock"
  }
}
```

#### Level Page JSON-LD Example
```json
{
  "@context": "https://schema.org",
  "@type": "DefinedTermSet",
  "name": "Learning Levels",
  "hasDefinedTerm": [
    {
      "@type": "DefinedTerm",
      "name": "Beginner",
      "description": "é€‚åˆé›¶åŸºç¡€å­¦å‘˜ï¼Œæä¾›è½¯ä»¶åŸºç¡€å’Œå¿«é€Ÿç†è§£çš„å…è´¹è¯¾ç¨‹ã€‚",
      "url": "https://www.doviai.com/levels/beginner"
    }
  ]
}
```

### Common Mistakes to Avoid

1. **Mixing page responsibilities**: For example, explaining what "Beginner" means on a Course page
2. **Using incorrect level terms**: Using `basic` instead of `beginner` in slugs or structured data
3. **False Schema.org claims**: Claiming to teach skills not actually covered in the course
4. **Semantic overlap**: Having Program pages repeat course content instead of focusing on learning order
5. **Ignoring single source of truth**: Defining level meanings in multiple places

---

# ğŸ¯ ä½¿ç”¨å»ºè®®

## Implementation Roadmap

### Immediate Actions (Now)

1. âœ… **Implement semantic page roles**: Ensure Course, Level, and Program pages follow their defined responsibilities
2. âœ… **Update course slugs**: Replace `-basic` with `-beginner` in all course slugs
3. âœ… **Enhance structured data**: Implement DefinedTerm format for educationalLevel with level page references
4. âœ… **Add level pages**: Create `/levels/` pages with clear level definitions

### Short-Term Actions (Next 2 Weeks)

1. **Implement Program pages**: Create structured learning pathways connecting courses
2. **Enhance JSON-LD**: Add more comprehensive Schema.org markup following LRMI best practices
3. **Optimize URL structure**: Ensure all URLs follow semantic rules and AEO best practices
4. **Add sitemap generation**: Include all level and program pages in the sitemap

### Long-Term Actions (Future)

1. **Build knowledge graph**: Develop a more comprehensive knowledge graph connecting courses, skills, and learning outcomes
2. **Implement advanced AEO features**: Add educationalOccupationalProgram, learningResourceType, and other advanced Schema.org properties
3. **Enhance level progression**: Implement clear prerequisites and progression indicators between levels
4. **Optimize for voice search**: Ensure semantic structure is optimized for voice assistants and conversational search

---

## Final Principles

> **`CLAUDE.mdï¼ˆæ ¹ç›®å½•ï¼‰ = é¡¹ç›®çš„è¯­ä¹‰å®ªæ³•`**
> **`frontend/CLAUDE.md = å‰ç«¯æ‰§è¡Œç»†åˆ™`**

This document defines the core semantic principles that guide all development decisions.
All AI agents, contributors, and future refactors must comply with these rules to maintain
consistent AEO / LRMI semantic alignment and optimal search engine understanding.

---

*Last updated: 2025-12-17*
*Version: 1.0.0*